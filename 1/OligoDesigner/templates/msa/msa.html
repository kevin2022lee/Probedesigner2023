{% extends "base.html" %} 
{% block content %}
 <title>多序列比对（Multiple sequence alignment）</title>
<script>
    $(function(){
        // 添加选项
        $("#opbtn").click(function(){
            if($("#opts>li").size() < 10){// 最多添加6个选项
                $("#opts").append('<li><label>Alignment序列</label><textarea rows="auto" name="seqtxt" class="form-control">\n'+
                                  '</textarea>\n'+                                  
                                  '</li>');
            }else{// 提示选项个数已经达到最大
                $("#optips").html("最多支持10个序列Alignment,不能再添加!");
                $("#optips").css({"color":"red"});
            }
            
        });
        
        // 删除选项
        $("#delbtn").click(function(){
            if($("#opts>li").size() <= 2){
                $("#optips").html("最低需要2个序列alignment，已经没有选项可以删除了!");
                $("#optips").css({"color":"red"});
               
            } else{
                // 删除选项,每次删除最后一个
                $("#opts>li").last().remove();
                
            }
            
        });
        
       //表单不能为空
       $("textarea[name='seqtxt']").each(function(){
    	   if($.trim($("textarea[name='seqtxt']").val())==""){
    		   $("#optips").html($("textarea[name='seqtxt']").val());
               $("#optips").css({"color":"red"});
               $("#sub").prop('disabled','disabled');
    	   }else{
    		// 删除选项,每次删除最后一个
    		   $("#optips").html("符合要求!");
               $("#optips").css({"color":"green"});
               $("#sub").removeAttr("disabled");
    	   }
       })
        
    });

</script>
<style>
    *{
        margin: 0px;
        padding: 0px;
    }
    
    #dv{
        width: 100px;
        height: 100px;
        background-color: yellow;
        margin: 0px auto 0px;
    }
    
</style>

<div class="panel panel-info" >
<div class="panel-heading">
<b>多序列比对（Multiple sequence alignment）</b>
</div>

<div class="container" style="padding:20px;height:auto;">

<form action="http://{{local}}/tools/msaresult/" method="POST" role="form">{% csrf_token %}
<ol id="opts" type="1">
<li>
<label>Alignment序列</label>
<textarea rows="auto" name="seqtxt" class="form-control" >

</textarea>
</li>
<li>
<label>Alignment序列</label>
<textarea rows="auto" name="seqtxt" class="form-control" >

</textarea>
</li>
</ol>
<br/>
 <span id="optips"></span>
 <br>
        <button id="opbtn" type="button"  class="btn btn-info"> <span class="glyphicon glyphicon-plus"></span> 添加Alignment选项</button>
        <button id="delbtn" type="button"  class="btn btn-info"> <span class="glyphicon glyphicon-minus"></span> 删除Alignment选项</button>
</div>
<div style="text-align:center;margin-bottom:10px;">
<button id="sub" type="submit" class="btn btn-primary" ><span class="glyphicon glyphicon-step-forward"></span>提交比对</button>
<button id="res" type="reset" class="btn btn-primary" ><span class="glyphicon glyphicon-trash"></span>清除比对</button>
</div>
</form>
<div style="margin-left:20px;">
<ol><b>注意信息</b>
<li>注意提交alignment的序列长度必须一致！</li>
<li>请自动剔掉除碱基以外的字符信息，或者从genbank或FASTA文件中复制！</li>
</ol>
</div>
</div>

<!-- /#mainWrap -->
 {% endblock %}